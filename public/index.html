<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Caro Online - Game 2 Ng∆∞·ªùi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- M√†n h√¨nh nh·∫≠p t√™n -->
    <div id="name-screen" class="screen active">
        <div class="container">
            <h1>üéÆ CARO ONLINE</h1>
            <div class="input-group">
                <input type="text" id="player-name" placeholder="Nh·∫≠p t√™n c·ªßa b·∫°n" maxlength="20">
                <button onclick="submitName()">Ti·∫øp t·ª•c</button>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh t·∫°o/tham gia ph√≤ng -->
    <div id="lobby-screen" class="screen">
        <div class="container">
            <h1>Xin ch√†o, <span id="display-name"></span>! üëã</h1>
            
            <div class="lobby-options">
                <div class="option-card">
                    <h2>T·∫°o ph√≤ng m·ªõi</h2>
                    <div class="game-mode-select">
                        <label>Ch·ªçn ch·∫ø ƒë·ªô ch∆°i:</label>
                        <select id="game-mode">
                            <option value="basic">Basic (5 qu√¢n li√™n ti·∫øp)</option>
                            <option value="block-both-ends">Ch·∫∑n 2 ƒë·∫ßu (5 qu√¢n + 1 ƒë·∫ßu h·ªü)</option>
                        </select>
                    </div>
                    <button onclick="createRoom()">T·∫°o Ph√≤ng</button>
                </div>

                <div class="option-card">
                    <h2>Ho·∫∑c tham gia b·∫±ng m√£ ph√≤ng</h2>
                    <div class="input-group">
                        <input type="text" id="room-code" placeholder="Nh·∫≠p m√£ ph√≤ng" maxlength="6">
                        <button onclick="joinRoom()">Tham gia</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh hi·ªÉn th·ªã QR code -->
    <div id="qr-screen" class="screen">
        <div class="container">
            <h1>Ph√≤ng ƒë√£ ƒë∆∞·ª£c t·∫°o! üéâ</h1>
            <div class="qr-container">
                <h2>M√£ ph√≤ng: <span id="room-id-display" class="room-code"></span></h2>
                <p>B·∫°n b√® c√≥ th·ªÉ qu√©t m√£ QR n√†y ƒë·ªÉ tham gia:</p>
                <img id="qr-code-img" src="" alt="QR Code">
                <p class="small-text">Ho·∫∑c truy c·∫≠p link:</p>
                <input type="text" id="room-url" readonly onclick="this.select()">
                <button onclick="copyRoomUrl()">üìã Copy Link</button>
                <p class="waiting-text">‚è≥ ƒêang ch·ªù ng∆∞·ªùi ch∆°i th·ª© 2...</p>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh ch∆°i game -->
    <div id="game-screen" class="screen">
        <div class="game-container">
            <div class="game-header">
                <div class="player-info">
                    <div class="player player-x" id="player-x-info">
                        <div class="symbol">X</div>
                        <div class="name" id="player-x-name">Ng∆∞·ªùi ch∆°i 1</div>
                    </div>
                    <div class="timer-display">
                        <div id="timer">30</div>
                        <div class="timer-label">gi√¢y</div>
                    </div>
                    <div class="player player-o" id="player-o-info">
                        <div class="symbol">O</div>
                        <div class="name" id="player-o-name">Ng∆∞·ªùi ch∆°i 2</div>
                    </div>
                </div>
                <div class="game-mode-display">
                    Ch·∫ø ƒë·ªô: <span id="current-game-mode"></span>
                </div>
                <div class="turn-indicator" id="turn-indicator">
                    L∆∞·ª£t c·ªßa: <span id="current-player-turn"></span>
                </div>
            </div>

            <div class="board-wrapper">
                <div id="board-container" class="board-container">
                    <canvas id="game-board"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh k·∫øt th√∫c -->
    <div id="game-over-screen" class="screen">
        <div class="container">
            <h1 id="game-result">üèÜ CHI·∫æN TH·∫ÆNG!</h1>
            <div class="winner-info">
                <div class="winner-symbol" id="winner-symbol">X</div>
                <h2 id="winner-name">Ng∆∞·ªùi ch∆°i 1</h2>
                <p id="win-reason"></p>
            </div>
            <button onclick="backToLobby()">V·ªÅ Trang Ch·ªß</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
